<html class="addBody">
  <div class="tool">
    <img class="img" alt="">
  </div>


<ion-content [scrollEvents]="true" >
  <div *ngIf="spinner" style="position:fixed;transform: scale(2); display: flex; width:100%; height:100%; justify-content: space-around; align-items: center; z-index:4;
  opacity: 0.7;">
    <ion-spinner name="lines-small" [paused]="false" color="warning"></ion-spinner>
   </div>
    <div class="bar primary">
      <ion-input style="font-style: italic; font-size: 3vw;" class="search" [(ngModel)]="searchKey" (ionChange)="handleSearch()" placeholder="Search by Name, Province, Distrinct and Town/Village"><ion-icon  name="search"></ion-icon></ion-input>

      <div class="close">
        <ion-icon [style.visibility]="vis" (click)="clearSearch()" name="close"></ion-icon>
      </div>

    </div>


    <ion-list class="lst">
      <div class="lstcont">

        <swiper [effect]="'coverflow'">
          <ng-template *ngIf="anyContent" swiperSlide>


              <div *ngIf="obj" (scroll)="logScrollStart($event)"  class="cont" >
                <div *ngFor = "let s of ziyarams">
                  <ion-item >
                    <ion-label (click) = "promo(s)">
                      <ion-label style="white-space: initial; font-weight: 510;">{{s.name}}</ion-label>
                      <p><small><ion-icon name="location-outline"></ion-icon>&nbsp; {{s.location}}</small></p>
                    </ion-label>
                    <div (click)="EditZiyaram(s)" class="edit">
                      <ion-icon class="icon" name="pencil"></ion-icon>
                    </div>
                    <div (click)="deleteZiyaram(s)" class="edit del">
                      <ion-icon class="icon" name="trash"></ion-icon>
                    </div>
                  </ion-item>


                </div>
              </div>

              <div *ngIf="!obj" (scroll)="logScrollStart($event)" class="cont">
                <div *ngFor = "let s of ziyarams">
                  <ion-item>
                    <ion-label (click) = "promo(s)">
                      <h6 style="white-space: initial; font-weight: 510;">{{s.name}}</h6>
                      <p><small><ion-icon name="location-outline"></ion-icon>&nbsp; {{s.location}}</small></p></ion-label>
                  </ion-item>
                </div>
              </div>

              <div style="width: 100%; height: 70%; position: fixed; display: flex; justify-content: space-around;align-items: center;" *ngIf = "ziyarams.length === 0" >

                <ion-chip style="width:76%;">
                  <ion-label style="margin: 0 auto;"><ion-icon name="search-outline"></ion-icon>&nbsp; தேடல் கிடைக்கவில்லை.</ion-label>
                </ion-chip>

            </div>


          </ng-template>
          <ng-template *ngIf="!anyContent"  swiperSlide>
            <div  class="cont">
              <ion-chip style="width:95%;  top: 38%;">
                <ion-label style="margin: 0 auto;" >விபரங்கள் விரைவில் இணைக்கப்படும்</ion-label>
              </ion-chip>
            </div>
          </ng-template>
          <ng-template *ngIf="obj" swiperSlide>
            <div class="head">
              <ion-text>Ziyaram Requests</ion-text>
            </div>
            <div *ngIf="anyReq"  class="cont1">
              <div *ngFor = "let s of ZiyaramRequests">
                <ion-item >
                  <ion-label style="white-space: initial;" (click) = "promo(s)">{{s.name}}</ion-label>
                  <div (click)="EditZiyaram(s)" class="edit">
                    <ion-icon class="icon" name="pencil"></ion-icon>
                  </div>
                  <div (click)="deleteZiyaramRequest(s)" class="edit del">
                    <ion-icon class="icon" name="trash"></ion-icon>
                  </div>
                </ion-item>
              </div>
            </div>

            <div *ngIf="!anyReq" class="cont">
              <ion-chip style="width:95%;  top: 38%;">
                <ion-label style="margin: 0 auto;" >தரவுகள் பெறப்படவில்லை</ion-label>
              </ion-chip>
            </div>
          </ng-template>

        </swiper>
      </div>

    </ion-list>

    <ion-modal backdropDismiss="false" mode="md" [isOpen]="isModalOpen">
      <ng-template>

          <ion-toolbar color="success">
            <ion-title style="font-size:14px">{{currZiyaram.name}}</ion-title>
            <ion-buttons slot="end">
              <ion-button (click)="setViewModel(false)">Close</ion-button>
            </ion-buttons>
          </ion-toolbar>

        <ion-content class="modalBody">
          <ion-card>
            <img style="display: flex; justify-content: center;" alt="Silhouette of mountains" src="{{img}}" (error)="missImage($event)" />

             <div *ngIf="cardSpinner" style="position:fixed;transform: scale(2); display: flex; width:100%; height:1%; justify-content: space-around; align-items: center; z-index:4;
                opacity: 0.7;">
                  <ion-spinner name="lines-small" [paused]="false" color="primary"></ion-spinner>
              </div>
            <ion-card-header>
              <ion-card-title style="width: 100%; font-weight: 700; font-size: medium;">{{currZiyaram.name}}</ion-card-title>
              <ion-card-subtitle><small><ion-icon name="location-outline"></ion-icon>&nbsp;{{currZiyaram.location}}</small></ion-card-subtitle>
              <ion-card-subtitle *ngIf = "currZiyaram.day !== ''"><small> <ion-icon name="calendar-outline"></ion-icon>
                &nbsp;{{currZiyaram.day}}</small></ion-card-subtitle>
            </ion-card-header>

            <ion-card-content  style="white-space: pre-line;">
              <span *ngIf="currZiyaram.description">{{currZiyaram.description}}</span>

              <ion-button color="danger" style="display:flex" (click)="launchGoogleMap()">Launch Google Map</ion-button>

            </ion-card-content>
          </ion-card>
        </ion-content>
      </ng-template>
    </ion-modal>





</ion-content>

<ion-fab [style.visibility]="btn"  vertical="bottom" horizontal="start">
  <!-- <ion-fab-button size="small" color="success"> -->
    <ion-button [routerLink] = "['/add-ziyaram']"  shape="round" color="warning" style="text-transform: capitalize;">
      <ion-icon slot="start"  name="add-sharp" size="medium"></ion-icon> Request
    </ion-button>
  <!-- </ion-fab-button> -->
  <!-- <ion-fab-list side="end">
    <ion-button [routerLink] = "['/add-ziyaram']" color="warning" size="small" shape="round">
      Send Ziyaram Details
    </ion-button>
  </ion-fab-list> -->
</ion-fab>
</html>
