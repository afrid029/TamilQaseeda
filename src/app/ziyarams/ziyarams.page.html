
  <div class="tool">
    <img class="img" alt="">
  </div>


<ion-content>
  <div *ngIf="spinner" style="position:fixed;transform: scale(3); display: flex; width:100%; height:100%; justify-content: space-around; align-items: center; z-index:4;">
    <ion-spinner name="bubbles" [paused]="false" color="primary"></ion-spinner>
   </div>
    <div class="bar primary">
      <ion-input class="search" [(ngModel)]="searchKey" (ionChange)="handleSearch()" placeholder="Search"><ion-icon  name="search"></ion-icon></ion-input>
      <div class="close">
        <ion-icon [style.visibility]="vis" (click)="clearSearch()" name="close"></ion-icon>
      </div>
      
    </div>

    <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
      <ion-refresher-content></ion-refresher-content>
    </ion-refresher>
    
    
    <div class="lst">
      <div class="lstcont">
        <div *ngIf="anyContent">
          <div *ngIf="obj" class="cont">
            <div *ngFor = "let s of ziyarams">
              <ion-item >
                <ion-label (click) = "promo(s)">{{s.name}}</ion-label>
                <div (click)="EditZiyaram(s)" class="edit">
                  <ion-icon class="icon" name="pencil"></ion-icon>
                </div>
                <div (click)="deleteZiyaram(s)" class="edit del">
                  <ion-icon class="icon" name="trash"></ion-icon>
                </div>
              </ion-item>
            </div>
          </div>
      
          <div *ngIf="!obj" class="cont">
            <div *ngFor = "let s of ziyarams">
              <ion-item>
                <ion-label (click) = "promo(s)">{{s.name}}</ion-label>
              </ion-item>
            </div>
          </div>

          <div style="width: 100%; height: 70%; position: fixed; display: flex; justify-content: space-around;align-items: center;" *ngIf = "ziyarams.length == 0" >
      
            <ion-chip style="width:76%;">
              <ion-label style="margin: 0 auto;"><ion-icon name="search-outline"></ion-icon>&nbsp; தேடல் கிடைக்கவில்லை.</ion-label>
            </ion-chip>
          
        </div>
        </div>
        <div *ngIf="!anyContent" class="cont">
          <ion-chip style="width:95%;  top: 38%;">
            <ion-label style="margin: 0 auto;" >விபரங்கள் விரைவில் இணைக்கப்படும்</ion-label>
          </ion-chip>
        </div>
      </div>
    </div>

    <ion-modal backdropDismiss="false" mode="md" [isOpen]="isModalOpen">
      <ng-template>
        <ion-header>
          <ion-toolbar color="success">
            <ion-title style="font-size:14px">{{currZiyaram.name}}</ion-title>
            <ion-buttons slot="end">
              <ion-button (click)="setViewModel(false)">Close</ion-button>
            </ion-buttons>
          </ion-toolbar>
        </ion-header>
        <ion-content>
          <ion-card>
            <img alt="Silhouette of mountains" src="{{img}}" (error)="missImage($event)" />
            <div *ngIf="cardSpinner" style="position:fixed;transform: scale(3); display: flex; width:100%; height:1%; justify-content: space-around; align-items: center; z-index:4;">
              <ion-spinner name="bubbles" [paused]="false" color="primary"></ion-spinner>
             </div>
            <ion-card-header>
              <ion-card-title style="width: 100%; font-weight: 700; font-size: medium;">{{currZiyaram.name}}</ion-card-title>
              <ion-card-subtitle><small><ion-icon name="location-outline"></ion-icon>&nbsp;{{currZiyaram.location}}</small></ion-card-subtitle>
              <ion-card-subtitle *ngIf = "currZiyaram.day !== ''"><small> <ion-icon name="calendar-outline"></ion-icon>
                &nbsp;{{currZiyaram.day}}</small></ion-card-subtitle>
            </ion-card-header>
          
            <ion-card-content style="white-space: pre-line;">
              {{currZiyaram.description}}

              <ion-button color="danger" style="display:flex" (click)="launchGoogleMap()">Launch Google Map</ion-button>

            </ion-card-content>
          </ion-card>
        </ion-content>
      </ng-template>
    </ion-modal>
  
  
    <!-- <ion-modal backdropDismiss="false" mode="md" [isOpen]="isModalOpen">
      <ng-template>
        <ion-header>
          <ion-toolbar color="success">
            <ion-title style="font-size: 14px">{{ currSong.title }}</ion-title>
            <ion-buttons slot="end">
              <ion-button (click)="setOpen(false)">Close</ion-button>
            </ion-buttons>
          </ion-toolbar>
        </ion-header>
        <ion-content class="ion-padding">
          <ion-chip class="auth">
            <ion-label style="font-size: 10px;"><b>தொகுப்பு / ஆக்கம் : </b><br><br>{{ currSong.author }}</ion-label>
          </ion-chip>
          <p style="white-space: pre-line; text-align: center; font-size: 13px;"> {{ currSong.content }}
          </p>
        </ion-content>
      </ng-template>
    </ion-modal> -->
  
  
    <!-- Edit Model -->
    <ion-modal backdropDismiss="false" [isOpen]="isEditOpen">
      <ng-template>
      
        <ion-header>
          <ion-toolbar style="--background-color: rgb(232, 248, 232) !important;">
      
            <ion-title >{{editZiyaram.name}}</ion-title>
            <ion-buttons slot="end">
              <ion-button (click)="setEditFalse()">Close</ion-button>
            </ion-buttons>
           
            <!-- <div style="padding-right: 5px;" slot="end">
              <ion-button type="submit"   [disabled] = "submitButton"  type="submit" size = "small" color="success">Save</ion-button>
              <ion-button size = "small" color="danger"  (click)="setEditFalse()">Close</ion-button>
            </div> -->
          </ion-toolbar>
        </ion-header>
        <ion-content class="ion-padding">
          <form  #addForm = "ngForm" validate>
            <ion-item lines="full">
              <ion-label position="floating">ஸியாரத்தின் பெயர்</ion-label>
              <ion-input  [(ngModel)]="editZiyaram.name" name="name" type="text" required></ion-input>
            </ion-item>
        
            <ion-item lines="full">
              <ion-label position="floating">விபரம்</ion-label>
              <ion-textarea style="max-height: 300px; overflow-y: scroll;" [(ngModel)]="editZiyaram.description"  [autoGrow]="true" name="description" required></ion-textarea>
            </ion-item>
            <ion-item lines="full">
              <ion-label position="floating">அமைவிடம்</ion-label>
              <ion-input [(ngModel)]="editZiyaram.location"  type="text" name="location" required></ion-input>
            </ion-item>
            <ion-item lines="full">
              <ion-label position="floating">விஷேட தினம்</ion-label>
              <ion-input [(ngModel)]="editZiyaram.day"  type="text" name="day"></ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Longtitude</ion-label>
              <ion-input [(ngModel)]="editZiyaram.long"  type="number" name="long" required></ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Latitude</ion-label>
              <ion-input [(ngModel)]="editZiyaram.lat"  type="number" name="lat" required></ion-input>
            </ion-item>
            <ion-item>
            <img src="{{editZiyaram.imageUrl}}" width="100%" alt=""/>
            </ion-item>
            <ion-item>
            <ion-button color="primary" size="medium">
              <input type="file" accept="image/*" (change)="openActionSheet($event)" />
            </ion-button>
            </ion-item>
            <div class="cont">
              <ion-button (click)="update()" [disabled]="addForm.invalid || btnvalid" type="submit" style="display: flex" color="success"  class = "btn">Update</ion-button>
            </div>
           </form>
          
        </ion-content>
  
      </ng-template>
    </ion-modal>
  
  <ion-fab [routerLink] = "['/dashboard']" vertical="bottom" horizontal="end" slot="fixed" (click)="unsbr()" >
    <ion-fab-button color="success">
      <ion-icon name="home" mode="md"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>
