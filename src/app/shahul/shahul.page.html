<html class="addBody">
  <ion-header>
  
    <div class="tool">
      <ion-buttons slot="start">
      <ion-back-button (click)="unsbr()" class="home" defaultHref="home" icon="home"></ion-back-button>
      </ion-buttons>
  
    </div>
  </ion-header>
  
  <ion-content>
    <div *ngIf="spinner" style="position:fixed;transform: scale(2); display: flex; width:100%; height:100%; justify-content: space-around; align-items: center; z-index:4;
  opacity: 0.7;">
    <ion-spinner name="lines-small" [paused]="false" color="warning"></ion-spinner>
   </div>

  <div class="bar primary">
    <ion-input class="search" [(ngModel)]="searchKey" (ionChange)="handleSearch()" placeholder="Search"><ion-icon  name="search"></ion-icon></ion-input>
    <div class="close">
      <ion-icon [style.visibility]="vis" (click)="clearSearch()" name="close"></ion-icon>
    </div>
    
  </div>
  
  <ion-list class="lst">
    <div class="lstcont">
    <div *ngIf = "anyContent">
      <div *ngIf = "obj" class="cont">
        <div *ngFor = "let song of songs">
            <ion-item style="background-color: rgb(238, 238, 238);">
              <ion-label (click) = "promo(song)">{{ song.title }}</ion-label>
              <div (click) = "EditSong(song)" class="edit">
                <ion-icon class="icon" name="pencil"></ion-icon>
              </div>
              <div (click) = "deleteSong(song)"  class="edit del">
                <ion-icon class="icon" name="trash"></ion-icon>
              </div>
            </ion-item>
            
        </div>
            
      </div>
  
      <div class="cont" *ngIf = "!obj">
        <div *ngFor = "let song of songs">
          <ion-item style="background-color: rgb(238, 238, 238);">
            <ion-label (click) = "promo(song)">{{ song.title }}</ion-label>
            
          </ion-item>
      </div> 
       
      </div>
  
      <div style="width: 100%; height: 70%; position: fixed; display: flex; justify-content: space-around;align-items: center;" *ngIf = "songs.length == 0" >
        
        <ion-chip style="width:76%;">
          <ion-label style="margin: 0 auto;"><ion-icon name="search-outline"></ion-icon>&nbsp; தேடல் கிடைக்கவில்லை.</ion-label>
        </ion-chip>
      
    </div>
    </div>
    <div class="cont" *ngIf = "!anyContent">
      <ion-chip style="width:95%; top:48%"> 
        <ion-label style="margin: 0 auto;" >பாடல்கள் விரைவில் இணைக்கப்படும்</ion-label>
      </ion-chip>
    </div>
  </div>
  </ion-list>
  
  
  <ion-modal  backdropDismiss="false" mode="md" [isOpen]="isModalOpen">
    <ng-template>
      
        <ion-toolbar color="success">
          <ion-title style="font-size: 14px">{{ currSong.title }}</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="setOpen(false)">Close</ion-button>
          </ion-buttons>
        </ion-toolbar>
    
      <ion-content class="ion-padding modalBody">
        <ion-chip class="auth">
          <ion-label style="font-size: 10px;"><b>தொகுப்பு / ஆக்கம் : </b><br><br>{{ currSong.author }}</ion-label>
        </ion-chip>
        <p style="white-space: pre-line; text-align: center; font-size: 13px;"> {{ currSong.content }}
        </p>
      </ion-content>
    </ng-template>
  </ion-modal>
  
  
  <!-- Edit Model -->
  <ion-modal backdropDismiss="false" [isOpen]="isEditOpen">
    <ng-template>
    
  
        <ion-toolbar color="warning">
          <ion-input (ionChange) = "onFieldChange()" [(ngModel)] = "editSong.title" required></ion-input>
         
          <div style="padding-right: 5px;" slot="end">
            <ion-button type="submit"  (click) = "updateSong()" [disabled] = "submitButton"  type="submit" size = "small" color="success">Save</ion-button>
            <ion-button size = "small" color="danger"  (click)="setOpen(false)">Close</ion-button>
          </div>
        </ion-toolbar>

      <ion-content class="ion-padding modalBody">
  
  
       <ion-chip class="auth" >
            <ion-input style="font-size: 10px;" (ionChange) = "onFieldChange()" required [(ngModel)] = "editSong.author"><b>தொகுப்பு / ஆக்கம் : </b><br><br> </ion-input>
          </ion-chip>
        <ion-textarea (ionChange) = "onFieldChange()" required [(ngModel)] = "editSong.content" style="white-space: pre-line; text-align: center; font-size: 15px;" [autoGrow] = "true"></ion-textarea>
      </ion-content>
  
    </ng-template>
  </ion-modal>
  </ion-content>
</html>